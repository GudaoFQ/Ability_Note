## 分布式事务
> 一个接口的命令操作涉及到了多个服务器，这个操作要么所有服务器都执行成功，要么都执行失败


### 基础知识
#### 数据库事务特性ACID
* Atomicity(原子性)：一个事务内的所有操作要么全部执行，要么全部不执行
* Consistency(一致性)：数据满足完整的约束性，不存在中间状态：转账业务（我给你转100元，不会出现我账户扣了100，你账户一分钱没加的中间状态）
* Isolation(隔离性)：多个事务并发不会互相影响：一个事务内部的数据对于其他事务来说是隔离的
* Durablility(持久性)：一个事务完成之后，数据就会被永久保存下来，之后的操作或者故障不会对事务的结果影响
* **扩展**
  * Redis是否支持事务？ 支持部分事务，但不支持（ACID）原子性
    * Redis的一个事务中如果有一条命令执行失败了，后面的命令还是会被执行，它是不支持回滚操作的，这就是Redis支持部分事务

#### 分布式CAP定理
* Consistency(一致性)：数据在不同的副本之间数据是保持一致的，并且当执行数据更新之后，各个副本之间能然是处于一致的状态
  * 特点：写操作有一定的延迟，会锁从库，但是一定不能返回旧数据
  * 总结：要么响应最新的数据，要么报错
* Availability(可用性)：系统提供的服务必须是处于一直可用的状态，针对每一次对系统的请求操作在设定的时间内，都能得到正常的result返回（不需要保证数据是最新的）
  * 
* Partition tolerance(分区容错性)：主服务器向其他从服务器同步数据失败，不影响读写操作，其中一个节点挂掉，不影响其对外提供其它服务