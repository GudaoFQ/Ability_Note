参考kafka重复消费.png
![](amsg-kafka重复消费.png)
### kafka内部执行：
1. kafka中有一个offset的概念，当你每次想kafka中写入消息的时候，都会有一个offset来代表这个消息的序号；当这一条消息被消费掉，隔断时间，消费者就会把被消费的消息的offset序号发送到kafka内部的zk；

### kafka重复消费：
1. 当消费者服务器将当前消息消费掉了之后，准备给zk发送offset时候，此时消费者服务器被重启或者其他原因，导致这条消息的offset没有发送出去；重启后，就会导致少数消息被重复消费一次